(this["webpackJsonpbooking-app"]=this["webpackJsonpbooking-app"]||[]).push([[0],{234:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(40),l=a.n(n),r=a(7),i=a(4),o=a(2),d=a.p+"static/media/bg.fa917832.jpg",j=a(14),b=a(17),m=a(46),h=a(0),u=function(e){var t=e.label,a=Object(m.a)(e,["label"]),c=Object(j.d)(a),s=Object(o.a)(c,2),n=s[0],l=s[1];return Object(h.jsxs)("div",{className:"mb-2",children:[Object(h.jsx)("label",{htmlFor:n.name,children:t}),Object(h.jsx)("input",Object(b.a)(Object(b.a)(Object(b.a)({className:"form-control shadow-none ".concat(l.touched&&l.error&&"is-invalid")},n),a),{},{autoComplete:"off"})),Object(h.jsx)(j.a,{component:"div",name:n.name,className:"error"})]})},O=a(16),x=a(6),p=a.n(x),g=window.location.href.split(":"),v=g="https"===g[0]?"https://parking-app-react.herokuapp.com":"http://localhost:4000",f=a(13),N=function(e){return{type:"ADD_USER",payload:e}};var w=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(),l=Object(o.a)(n,2),i=l[0],b=l[1],m=Object(f.b)(),x=O.a({email:O.b().email("Email is invalid").required("Email is required"),password:O.b().min(6,"Password must be at least 6 charaters").required("Password is required")});return Object(h.jsx)("div",{style:{backgroundImage:"url(".concat(d,")"),height:"100vh",width:"100%",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:Object(h.jsx)("div",{className:"container ",children:Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsx)("div",{className:"col-md-5 bg-white px-5 pb-3",style:{marginTop:"180px"},children:Object(h.jsx)(j.c,{initialValues:{email:"",password:""},validationSchema:x,onSubmit:function(e){var t={email:e.email.toLowerCase(),password:e.password};p()({method:"post",url:v+"/login",data:t,withCredentials:!0}).then((function(e){200===e.data.status?(b("alert-success"),s(e.data.message),console.log(e.data.user),m(N({loginStatus:!0,loginUser:e.data.user,role:e.data.user.role}))):(b("alert-danger"),s(e.data.message))})).catch((function(e){console.log(e)}))},children:function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"my-4 font-weight-bold .display-4",style:{color:"#083144"},children:"Login"}),Object(h.jsxs)(j.b,{children:[Object(h.jsx)(u,{label:"Email",name:"email",type:"email"}),Object(h.jsx)(u,{label:"Password",name:"password",type:"password"}),Object(h.jsx)("button",{className:"btn text-white",style:{backgroundColor:"#083144"},type:"submit",children:"Login"})]}),Object(h.jsxs)("p",{className:"mt-2",children:["Already have an account? ",Object(h.jsx)(r.b,{to:"/",children:"Signup"})," "]}),a?Object(h.jsx)("div",{className:"alert ".concat(i),role:"alert",children:a}):null]})}})})})})})},y=function(e){var t=e.label,a=Object(m.a)(e,["label"]),c=Object(j.d)(a),s=Object(o.a)(c,2),n=s[0],l=s[1];return Object(h.jsxs)("div",{className:"mb-2",children:[Object(h.jsx)("label",{htmlFor:n.name,children:t}),Object(h.jsx)("input",Object(b.a)(Object(b.a)(Object(b.a)({className:"form-control shadow-none ".concat(l.touched&&l.error&&"is-invalid")},n),a),{},{autoComplete:"off"})),Object(h.jsx)(j.a,{component:"div",name:n.name,className:"error"})]})};var S=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(),l=Object(o.a)(n,2),i=l[0],b=l[1],m=O.a({firstName:O.b().max(15,"Must be 15 characters or less").required("Required"),lastName:O.b().max(20,"Must be 20 characters or less").required("Required"),email:O.b().email("Email is invalid").required("Email is required"),phone:O.b().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is not valid"),password:O.b().min(6,"Password must be at least 6 charaters").required("Password is required")});return Object(h.jsx)("div",{style:{backgroundImage:"url(".concat(d,")"),height:"100vh",width:"100%",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:Object(h.jsx)("div",{className:"container ",children:Object(h.jsx)("div",{className:"row justify-content-center",children:Object(h.jsx)("div",{className:"col-md-5 bg-white px-5 pb-3",style:{marginTop:"40px"},children:Object(h.jsx)(j.c,{initialValues:{firstName:"",lastName:"",email:"",phone:"",password:""},validationSchema:m,onSubmit:function(e){var t={firstName:e.firstName,lastName:e.lastName,email:e.email.toLowerCase(),phone:e.phone,password:e.password};p()({method:"post",url:v+"/signup",data:t,withCredentials:!0}).then((function(t){200===t.data.status?(b("alert-success"),s(t.data.message),e.firstName="",e.lastName="",e.email="",e.phone="",e.password=""):(b("alert-danger"),s(t.data.message))})).catch((function(e){console.log(e)}))},children:function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"my-4 font-weight-bold .display-4",style:{color:"#083144"},children:"Sign Up"}),Object(h.jsxs)(j.b,{children:[Object(h.jsx)(y,{label:"First Name",name:"firstName",type:"text"}),Object(h.jsx)(y,{label:"Last Name",name:"lastName",type:"text"}),Object(h.jsx)(y,{label:"Email",name:"email",type:"email"}),Object(h.jsx)(y,{label:"Phone",name:"phone",type:"text"}),Object(h.jsx)(y,{label:"Password",name:"password",type:"password"}),Object(h.jsx)("button",{className:"btn text-white",style:{backgroundColor:"#083144"},type:"submit",children:"Register"})]}),Object(h.jsxs)("p",{className:"mt-2",children:["Already have an account? ",Object(h.jsx)(r.b,{to:"/login",children:"Login"})," "]}),a?Object(h.jsx)("div",{className:"alert ".concat(i),role:"alert",children:a}):null]})}})})})})})};var k=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){p()({method:"get",url:v+"/getLocations",withCredentials:!0}).then((function(e){200===e.status?s(e.data.data):console.log(e)})).catch((function(e){console.log(e)}))}),[]),Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row mt-5",children:a.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("img",{src:e.imgUrl,className:"card-img-top",alt:"..."}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title text-capitalize",style:{color:"#083144"},children:e.location}),Object(h.jsx)("p",{className:"card-text",children:e.desc}),Object(h.jsx)(r.b,{to:{pathname:"/booking",state:e},className:"btn text-white",style:{backgroundColor:"#083144"},children:"Booking"})]})]})},t)}))})})})},D=a(32),C=a.n(D),q=a(33),E=a.n(q);var A=function(e){for(var t=Object(c.useState)({startData:[],endData:[]}),a=Object(o.a)(t,2),s=a[0],n=a[1],l=Object(c.useState)(""),r=Object(o.a)(l,2),i=r[0],d=r[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),m=b[0],u=b[1],O=Object(c.useState)(""),x=Object(o.a)(O,2),g=x[0],f=x[1],N=Object(c.useState)(""),w=Object(o.a)(N,2),y=w[0],S=w[1],k=Object(c.useState)(),D=Object(o.a)(k,2),q=D[0],A=D[1],L=Object(c.useState)(""),U=Object(o.a)(L,2),P=U[0],B=U[1],T=Object(c.useState)(!1),z=Object(o.a)(T,2),I=z[0],R=z[1],F=e.location.state.slots,M=[],V=1;V<=F;V++)M.push(V);var J=new Date(i+" "+g).getTime(),_=new Date(m+" "+y).getTime(),$=[];console.log(s),s.startData.find((function(e,t){(E()(J).isSameOrAfter(e.startDate)||E()(J).isSameOrBefore(e.endData))&&($.push(Number(e.slot)),console.log(e))})),s.endData.find((function(e,t){(E()(_).isSameOrAfter(e.startDate)||E()(_).isSameOrBefore(e.endData))&&($.push(Number(e.slot)),console.log(e))}));var G=M.filter((function(e){return $.indexOf(e)<0}));return console.log("res===",G),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"row justify-content-center",children:[Object(h.jsx)("h2",{className:"text-center mt-3",children:"Book Parking"}),Object(h.jsxs)("div",{className:"col-md-5 bg-white py-4 px-4 mt-3",style:{boxShadow:"0 0 10px grey"},children:[Object(h.jsx)("h2",{className:"text-center mb-3 text-capitalize",children:e.location.state.location}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault(),J<Date.now()||_<Date.now()?C.a.fire({icon:"error",title:"Oops...",text:"Please select valid date and time"}):""===q||void 0===q?B("Required"):p()({method:"post",url:v+"/booking",data:{location:e.location.state.location,startDate:Number(J),endDate:Number(_),slot:q},withCredentials:!0}).then((function(e){200===e.data.status?(console.log(e.data.message),C.a.fire("Congratulations",e.data.message,"success"),R(!1)):(console.log(e.data.message),C.a.fire({icon:"error",title:"Oops...",text:e.data.message}))})).catch((function(e){console.log(e)}))},children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Start Day"}),Object(h.jsx)("input",{type:"date",className:"form-control",value:i,required:!0,onChange:function(e){return d(e.target.value)}})]}),Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"End Day"}),Object(h.jsx)("input",{type:"date",className:"form-control",value:m,required:!0,onChange:function(e){return u(e.target.value)}})]})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Start Time"}),Object(h.jsx)("input",{type:"time",className:"form-control",value:g,required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"End Time"}),Object(h.jsx)("input",{type:"time",className:"form-control",required:!0,onChange:function(e){return S(e.target.value)}})]})]}),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col",children:[I?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("label",{children:"Select Slots"}),Object(h.jsxs)("select",{className:"form-control",required:!0,onChange:function(e){return A(e.target.value)},children:[Object(h.jsx)("option",{children:"Select Slots"}),G.map((function(e,t){return Object(h.jsxs)("option",{value:e,children:["Slot ",e]},t)}))]})]}):null,P?Object(h.jsx)("p",{className:"text-danger",style:{fontSize:12},children:P}):null]})}),Object(h.jsx)("button",{className:"btn text-white mt-3",style:{backgroundColor:"#083144"},type:"submit",children:"Book"}),Object(h.jsx)("button",{className:"btn text-white mt-3 ml-3",style:{backgroundColor:"#083144"},onClick:function(){""!==g&&""!==y&&""!==i&&""!==m?(p()({method:"post",url:v+"/validateSlot",data:{startDate:Number(J),endDate:Number(_),location:e.location.state.location},withCredentials:!0}).then((function(e){200===e.data.status?n(e.data.data):n({startData:[],endData:[]})})).catch((function(e){console.log(e)})),R(!0)):C.a.fire({icon:"error",title:"Oops...",text:"Please fill in all required fields before checking the slots"})},type:"button",children:"Show Slot"})]})]})]})})};var L=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){p()({method:"get",url:v+"/getBookings",withCredentials:!0}).then((function(e){console.log(e.data.data),s(e.data.data)})).catch((function(e){console.log(e)}))}),[]),Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row mt-5",children:Object(h.jsxs)("table",{className:"table",children:[Object(h.jsx)("thead",{style:{backgroundColor:"#083144",color:"#fff"},children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"#"}),Object(h.jsx)("th",{scope:"col",children:"Full Name"}),Object(h.jsx)("th",{scope:"col",children:"Slot"}),Object(h.jsx)("th",{scope:"col",children:"Start Date"}),Object(h.jsx)("th",{scope:"col",children:"End Date"}),Object(h.jsx)("th",{scope:"col",children:"Start Time"}),Object(h.jsx)("th",{scope:"col",children:"End Time"}),Object(h.jsx)("th",{scope:"col",children:"Location"})]})}),0===a.length?Object(h.jsx)("p",{children:"No booking you have made"}):a&&a.map((function(e,t){return Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"row",children:t+1}),Object(h.jsx)("td",{className:"text-capitalize",children:e.firstName+" "+e.lastName}),Object(h.jsxs)("td",{children:["Slot ",e.slot]}),Object(h.jsx)("td",{children:new Date(e.startDate).toLocaleDateString()}),Object(h.jsx)("td",{children:new Date(e.endDate).toLocaleDateString()}),Object(h.jsx)("td",{children:new Date(e.startDate).toLocaleTimeString()}),Object(h.jsx)("td",{children:new Date(e.endDate).toLocaleTimeString()}),Object(h.jsx)("td",{className:"text-capitalize",children:e.location})]})},t)}))]})})})})};var U=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1];return Object(c.useEffect)((function(){p()({method:"get",url:v+"/getLocations",withCredentials:!0}).then((function(e){200===e.status?s(e.data.data):console.log(e)})).catch((function(e){console.log(e)}))}),[]),Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row mt-5",children:a.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-4",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("img",{src:e.imgUrl,className:"card-img-top",alt:"..."}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{className:"card-title text-capitalize",style:{color:"#083144"},children:e.location}),Object(h.jsx)("p",{className:"card-text",children:e.desc}),Object(h.jsxs)("p",{children:["Slots ",e.slots]})]})]})},t)}))})})})};var P=function(){return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"row justify-content-center",children:[Object(h.jsx)("h2",{className:"text-center mt-3",children:"Add Parking Areas"}),Object(h.jsx)("div",{className:"col-md-5 bg-white py-4 px-4 mt-3",style:{boxShadow:"0 0 10px grey"},children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p()({method:"post",url:v+"/addAreaDetails",data:{location:document.getElementById("location").value,slots:document.getElementById("slots").value,desc:document.getElementById("desc").value,imgURl:document.getElementById("img").value},withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){return[console.log(e)]}))},children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Location"}),Object(h.jsx)("input",{type:"text",placeholder:"Location",className:"form-control",id:"location",required:!0})]}),Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Slots"}),Object(h.jsx)("input",{type:"number",placeholder:"Slots",className:"form-control",id:"slots",required:!0})]})]}),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("textarea",{className:"form-control",placeholder:"Description",required:!0,id:"desc",rows:"3"})]})}),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col",children:[Object(h.jsx)("label",{children:"Area Image"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"img",placeholder:"Image Url",required:!0})]})}),Object(h.jsx)("button",{className:"btn text-white mt-3",style:{backgroundColor:"#083144"},type:"submit",children:"Add"})]})})]})})};var B=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.addUser})),a=Object(i.g)();return Object(h.jsxs)("div",{className:"justify-content-right",children:[Object(h.jsx)("span",{className:"text-white mr-3",style:{textTransform:"capitalize"},children:t.loginUser.firstName}),Object(h.jsx)("button",{className:"btn btn-light ",onClick:function(){p()({method:"get",url:v+"/logout",withCredentials:!0}).then((function(t){e(N({loginStatus:!1,role:null})),a.push("/login")}),(function(e){console.log(e)}))},children:"logout"})]})};var T=function(){var e=Object(f.c)((function(e){return e.addUser}));return Object(h.jsx)("div",{style:{backgroundColor:"#083144"},children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("nav",{className:"navbar navbar-expand-lg pt-4 pb-4 ",children:[Object(h.jsx)("a",{className:"navbar-brand text-white",children:"Booking App"}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:"user"===e.role?Object(h.jsxs)("div",{className:"navbar-nav",children:[Object(h.jsx)(r.b,{to:"/",className:"nav-item nav-link active text-white",children:"Areas"}),Object(h.jsx)(r.b,{to:"/viewbooking",className:"nav-item nav-link text-white",children:"View Booking"})]}):"admin"===e.role?Object(h.jsxs)("div",{className:"navbar-nav",children:[Object(h.jsx)(r.b,{to:"/",className:"nav-item nav-link active text-white",children:"Areas"}),Object(h.jsx)(r.b,{to:"/addarea",className:"nav-item nav-link text-white",children:"Add Area"})]}):null}),Object(h.jsx)(B,{})]})})})};var z=function(){var e=Object(f.c)((function(e){return e.addUser})),t=Object(f.b)();return Object(c.useEffect)((function(){return p()({method:"get",url:v+"/profile",withCredentials:!0}).then((function(e){200===e.data.status&&t(N({loginUser:e.data.profile,loginStatus:!0,role:e.data.profile.role}))})).catch((function(e){e&&t(N({loginStatus:!1}))})),function(){console.log("cleanup")}}),[t]),null===e.loginUser?Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"d-flex align-items-center justify-content-center ",style:{width:"100%",height:"100vh"},children:Object(h.jsx)("div",{className:"spinner-border ",role:"status",children:Object(h.jsx)("span",{className:"sr-only",children:"Loading..."})})})}):Object(h.jsxs)(r.a,{children:[!1===e.loginStatus?Object(h.jsx)("div",{children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:S}),Object(h.jsx)(i.b,{path:"/login",component:w}),Object(h.jsx)(i.b,{path:"*",children:Object(h.jsx)(i.a,{to:"/"})})]})}):null,"user"===e.role?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{}),Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:k}),Object(h.jsx)(i.b,{path:"/booking",component:A}),Object(h.jsx)(i.b,{path:"/viewbooking",component:L}),Object(h.jsx)(i.b,{path:"*",children:Object(h.jsx)(i.a,{to:"/"})})]})]}):null,"admin"===e.role?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(T,{}),Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:U}),Object(h.jsx)(i.b,{path:"/addarea",component:P}),Object(h.jsx)(i.b,{path:"*",children:Object(h.jsx)(i.a,{to:"/"})})]})]}):null]})};var I=function(){return Object(h.jsx)(z,{})},R=(a(233),a(45)),F={loginUser:null,loginStatus:!1,role:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object(b.a)({},t.payload);default:return e}},V=Object(R.a)({addUser:M}),J=Object(R.b)(V);l.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(f.a,{store:J,children:Object(h.jsx)(I,{})})}),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.62f1434c.chunk.js.map